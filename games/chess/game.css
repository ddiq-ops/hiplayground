/* === 전체 레이아웃 === */
.chess-wrapper {
  width: 100%; height: 100%;
  display: flex; justify-content: center; align-items: center;
  background: #1e272e; font-family: 'Pretendard', sans-serif;
  user-select: none; overflow: hidden;
}

.game-frame {
  position: relative; width: 900px; height: 750px;
  background: #2f3640; border-radius: 12px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.6);
  border: 4px solid #353b48;
  display: flex; flex-direction: column; overflow: hidden;
}

/* === 상단 헤더 === */
.chess-header {
  height: 80px; background: #222;
  display: flex; justify-content: space-between; align-items: center;
  padding: 0 30px; border-bottom: 2px solid #353b48; color: white;
}

.chess-status-group { display: flex; flex-direction: column; gap: 5px; }

.round-badge {
  background: #e74c3c; color: white; padding: 5px 12px;
  border-radius: 12px; font-weight: 900; font-size: 0.9rem;
  display: inline-block; width: fit-content;
  box-shadow: 0 2px 5px rgba(231, 76, 60, 0.4);
}

.turn-info { display: flex; gap: 15px; align-items: center; margin-top: 5px; }
.player-badge {
  font-size: 1rem; color: #7f8c8d; font-weight: bold;
  display: flex; align-items: center; gap: 6px; transition: 0.3s;
}
.player-badge.active { color: #fff; text-shadow: 0 0 10px rgba(255,255,255,0.5); transform: scale(1.05); }

.king-icon { font-size: 1.2rem; }

.btn-group { display: flex; gap: 8px; }
.btn-util {
  background: #353b48; border: none; color: white; padding: 8px 12px;
  border-radius: 6px; cursor: pointer; font-weight: bold; transition: 0.2s; font-size: 0.9rem;
}
.btn-util:hover { background: #3d4655; }

/* === 체스 보드 영역 === */
.chess-body {
  flex: 1; display: flex; justify-content: center; align-items: center;
  background: #1e272e; padding: 10px; position: relative;
}

.chess-board {
  width: 600px; height: 600px;
  background: #deb887; /* 밝은 칸 (나무) */
  border: 15px solid #5d4037;
  border-radius: 4px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.6);
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  grid-template-rows: repeat(8, 1fr);
}

.square {
  width: 100%; height: 100%;
  position: relative;
  display: flex; justify-content: center; align-items: center;
}
.square.light { background: #f0d9b5; }
.square.dark { background: #b58863; }

/* 하이라이트 & 힌트 */
.square.selected { background: rgba(255, 255, 0, 0.5) !important; }
.square.last-move { background: rgba(155, 255, 100, 0.5) !important; }
.square.check { background: rgba(255, 0, 0, 0.6) !important; }

/* 이동 가능 표시 (점) */
.hint-dot {
  width: 18px; height: 18px; background: rgba(0,0,0,0.2);
  border-radius: 50%; pointer-events: none;
}
.square.capture-hint .hint-dot {
  background: rgba(255, 0, 0, 0.4); /* 공격 가능 시 붉은 점 */
  width: 40px; height: 40px; border: 4px solid rgba(255,0,0,0.4); background: none;
}

/* === 기물 (Piece) === */
.piece {
  width: 90%; height: 90%;
  background-size: contain; background-repeat: no-repeat; background-position: center;
  cursor: grab; filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.5));
  transition: transform 0.15s;
  z-index: 10;
}
.piece:active { cursor: grabbing; transform: scale(1.1); }
.piece.white { filter: drop-shadow(0 2px 3px rgba(0,0,0,0.3)); }

/* === 모달 & 팝업 === */
.chess-modal {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0,0,0,0.85); display: flex; justify-content: center; align-items: center;
  opacity: 0; pointer-events: none; transition: opacity 0.3s; z-index: 100;
}
.chess-modal.active { opacity: 1; pointer-events: auto; }

.modal-box {
  background: #2f3640; padding: 40px; border-radius: 15px; text-align: center;
  border: 2px solid #57606f; color: white; min-width: 300px;
}
.modal-title { font-size: 2.5rem; font-weight: bold; margin-bottom: 15px; }
.modal-desc { font-size: 1.1rem; color: #bdc3c7; margin-bottom: 30px; }
.btn-action {
  padding: 12px 35px; background: #3498db; color: white; border: none;
  border-radius: 8px; font-size: 1.2rem; cursor: pointer; box-shadow: 0 4px 0 #2980b9;
}

/* 프로모션 선택창 */
.promotion-select {
  display: flex; gap: 15px; justify-content: center; margin-top: 20px;
}
.promo-option {
  width: 60px; height: 60px; background: #b58863; border-radius: 8px;
  cursor: pointer; transition: 0.2s; display: flex; justify-content: center; align-items: center;
}
.promo-option:hover { transform: scale(1.1); background: #f0d9b5; }
.promo-img { width: 80%; height: 80%; background-size: contain; background-repeat: no-repeat; }

@media (max-height: 800px) {
  .chess-board { width: 500px; height: 500px; }
  .game-frame { height: 650px; }
}