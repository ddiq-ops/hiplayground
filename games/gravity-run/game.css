/* === 전체 레이아웃 === */
.gr-wrapper {
  width: 100%; height: 100%;
  display: flex; justify-content: center; align-items: center;
  background: #1e272e; font-family: 'Pretendard', sans-serif;
  user-select: none; overflow: hidden;
  color: #fff;
  position: absolute; top: 0; left: 0;
}

/* 게임 프레임 */
.game-frame {
  position: relative;
  width: 900px; height: 600px;
  background: #050505;
  border-radius: 16px;
  box-shadow: 0 0 60px rgba(0, 210, 211, 0.2);
  border: 4px solid #353b48;
  overflow: hidden; 
  transform: translateZ(0);
}

/* 배경 */
.gr-background {
  position: absolute; top: 0; left: 0; width: 200%; height: 100%;
  background: 
      linear-gradient(rgba(0, 210, 211, 0.1) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0, 210, 211, 0.1) 1px, transparent 1px);
  background-size: 100px 100px;
  transform: perspective(800px) rotateX(60deg);
  transform-origin: center 60%;
  animation: moveGrid 0.5s linear infinite; /* 기본 속도 더 빠르게 */
  opacity: 0.3; pointer-events: none; z-index: 1;
}

/* UI */
.gr-ui {
  position: absolute; top: 0; left: 0; width: 100%; padding: 30px;
  display: flex; justify-content: space-between; align-items: flex-start;
  z-index: 50; box-sizing: border-box; pointer-events: none;
}
.gr-score-box { font-size: 4rem; font-weight: 900; color: #00d2d3; font-style: italic; letter-spacing: -3px; line-height: 1; text-shadow: 0 0 20px rgba(0,210,211,0.5); }
.gr-level-box { font-size: 1.5rem; color: #ff9ff3; font-weight: 800; margin-top: 5px; text-transform: uppercase; }
.btn-sound { 
  pointer-events: auto;
  background: none; border: none; font-size: 2.5rem; cursor: pointer; color: white; opacity: 0.8; z-index: 60; 
}

/* === 게임 영역 === */
.gr-game-area {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  z-index: 5;
  border-top: 6px solid #00d2d3; 
  border-bottom: 6px solid #00d2d3;
  box-sizing: border-box; 
}

/* 플레이어 */
.gr-player {
  position: absolute; left: 150px; width: 50px; height: 50px;
  background: #fff; border-radius: 8px;
  box-shadow: 0 0 20px #fff, 0 0 40px #00d2d3;
  transition: transform 0.1s; 
  z-index: 20;
}
.gr-player::after {
  content: ''; position: absolute; top: 15px; left: -60px; width: 60px; height: 20px;
  background: linear-gradient(90deg, transparent, rgba(0,210,211,0.6));
  filter: blur(5px); z-index: -1;
}

/* 장애물 공통 (너비 삭제 -> JS 제어) */
.gr-obstacle {
  position: absolute; 
  background: #ff4757; 
  box-shadow: 0 0 30px #ff4757;
  border: 3px solid #fff;
  z-index: 15;
}

.gr-obstacle.top { border-top: none; border-radius: 0 0 6px 6px; }
.gr-obstacle.bottom { border-bottom: none; border-radius: 6px 6px 0 0; }
.gr-obstacle.middle {
  border-radius: 8px; background: #e67e22;
  box-shadow: 0 0 30px #e67e22; border: 3px solid #fff;
}
.gr-obstacle.middle::after {
  content: '⚠️'; position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%); font-size: 20px;
}

/* 파티클 */
.gr-particle {
  position: absolute; width: 8px; height: 8px; background: #fff;
  border-radius: 50%; pointer-events: none; z-index: 30;
  box-shadow: 0 0 10px #fff;
}

/* 오버레이 */
.gr-overlay {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0,0,0,0.9);
  display: flex; flex-direction: column; justify-content: center; align-items: center;
  z-index: 100; opacity: 0; pointer-events: none; transition: opacity 0.3s;
}
.gr-overlay.active { opacity: 1; pointer-events: auto; }

.gr-title { font-size: 5rem; font-weight: 900; color: #fff; margin-bottom: 20px; font-style: italic; text-transform: uppercase; text-shadow: 6px 6px 0 #00d2d3; }
.gr-desc { font-size: 1.8rem; color: #bdc3c7; margin-bottom: 60px; text-align: center; }
.gr-btn {
  padding: 25px 100px; font-size: 2.5rem; font-weight: 900;
  background: #ff4757; color: white; border: none; border-radius: 16px;
  cursor: pointer; box-shadow: 0 15px 0 #b33939;
  transform: skewX(-10deg); transition: all 0.1s;
}
.gr-btn:active { transform: skewX(-10deg) scale(0.95); margin-top: 5px; box-shadow: 0 5px 0 #b33939; }

@keyframes moveGrid { 
  from { transform: perspective(800px) rotateX(60deg) translateY(0); } 
  to { transform: perspective(800px) rotateX(60deg) translateY(100px); } 
}